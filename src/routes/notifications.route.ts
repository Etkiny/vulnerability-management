import { Router } from 'express';
import { validator as validatorMiddleware } from '@middlewares';
import { notification as notificationValidation } from '@validations';
import { notifications as notificationController } from '@controllers';
import { triggerCronJobManually } from '../cron/updateVulnerabilities';

const route = Router();

route.post(
    '/send',
    validatorMiddleware.requestValidator(notificationValidation.sendNotifications),
    notificationController.sendNotifications
);

route.get('/trigger-cron', (req, res) => {
    triggerCronJobManually();
    res.status(200).json({ message: 'Cron job triggered manually' });
});

export default route;
